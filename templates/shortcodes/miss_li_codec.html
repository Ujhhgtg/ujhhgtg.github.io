<div id="miss-li-codec-container">
  <h2>Ms. Li Codec | Ms. Li 编解码器</h2>

  <div style="margin-bottom: 15px">
    <p><strong>1. Select Dictionary Words (Base) 选择字典词语 (进制):</strong></p>
    <div id="dictionary-selection">
      <label
        ><input type="checkbox" name="dict-word" value="redo" checked />
        redo</label
      >
      <label
        ><input type="checkbox" name="dict-word" value="bonus" checked />
        bonus</label
      >
      <label
        ><input type="checkbox" name="dict-word" value="sit-down" />
        sit-down</label
      >
      <label
        ><input type="checkbox" name="dict-word" value="stand-up" />
        stand-up</label
      >
      <label
        ><input type="checkbox" name="dict-word" value="schedule" />
        schedule</label
      >
      <label
        ><input type="checkbox" name="dict-word" value="杨牧ger~" />
        杨牧ger~</label
      >
    </div>

    <div id="custom-dictionary-inputs" style="margin-top: 10px">
      <button
        onclick="addCustomWordInput()"
        style="padding: 5px 10px; font-size: 0.9em; margin-top: 5px"
      >
        + Add Custom Word 添加自定义词语
      </button>
    </div>

    <p style="margin-top: 5px; font-size: 0.9em">
      Selected Base | 已选中的进制: <strong id="current-base">2</strong>
    </p>
  </div>

  <hr style="border-top: 1px solid #ddd" />

  <p><strong for="miss-li-input">2. Input 输入:</strong></p>
  <textarea
    id="miss-li-input"
    rows="5"
    placeholder="Enter text to encode (e.g., 'Hello') or word sequence to decode. 输入要编码的文本 (例如 'Hello') 或要解码的词语序列。"
  ></textarea>

  <div style="margin-top: 10px; margin-bottom: 10px">
    <button onclick="missLiEncode()">Encode</button>
    <button onclick="missLiDecode()">Decode</button>
  </div>

  <p><strong for="miss-li-output">3. Output 输出:</strong></p>

  <textarea
    id="miss-li-output"
    rows="5"
    readonly
    placeholder="Result will appear here 结果将在此显示"
  ></textarea>
</div>

<script src="{{ get_url(path='js/miss_li_codec.js') }}"></script>

<style>
  #miss-li-codec-container {
    padding: 15px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #f9f9f9; /* Light background */
    color: #1a1a1a; /* Dark text */
  }
  #miss-li-codec-container textarea,
  #custom-dictionary-inputs input[type="text"] {
    width: 100%;
    box-sizing: border-box;
    margin-top: 5px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    background-color: white; /* White input background */
    color: #1a1a1a;
  }
  #miss-li-codec-container button {
    padding: 8px 15px;
    margin-right: 10px;
    cursor: pointer;
    background-color: #007bff; /* Primary blue button */
    color: white;
    border: none;
    border-radius: 4px;
  }
  #custom-dictionary-inputs button {
    background-color: #f44336; /* Remove button red */
  }
  hr {
    border-top: 1px solid #ddd;
  }

  /* --- 2. DARK THEME STYLES (Overrides) --- */
  @media (prefers-color-scheme: dark) {
    #miss-li-codec-container {
      /* Darker container background */
      background-color: #2c2c2c;
      /* Lighter text */
      color: #e0e0e0;
      /* Border contrast */
      border-color: #444;
    }
    #miss-li-codec-container textarea,
    #custom-dictionary-inputs input[type="text"] {
      /* Very dark input background */
      background-color: #1e1e1e;
      /* Light text */
      color: #f0f0f0;
      /* Input border contrast */
      border-color: #555;
    }
    #miss-li-codec-container button {
      /* Adjusted button color for dark theme */
      background-color: #558ed5;
    }
    #custom-dictionary-inputs button {
      /* Adjusted remove button red for dark theme */
      background-color: #e9675e;
    }
    hr {
      border-top: 1px solid #555;
    }
  }
</style>
<script>
  // Re-run setup on checkbox change to update the base display
  document
    .querySelectorAll('#dictionary-selection input[type="checkbox"]')
    .forEach((checkbox) => {
      checkbox.addEventListener("change", updateBaseDisplay);
    });

  updateBaseDisplay();
</script>
